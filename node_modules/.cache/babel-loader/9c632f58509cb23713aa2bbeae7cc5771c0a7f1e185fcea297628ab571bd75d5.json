{"ast":null,"code":"import { collection, getDocs, addDoc, getFirestore, deleteDoc, doc } from \"firebase/firestore\";\nimport { db } from \"./firebase\";\nimport favorites from \"../pages/Favorites\";\nconst fetchSneakers = async () => {\n  try {\n    const sneakersCollection = collection(db, \"items\");\n    const snapshot = await getDocs(sneakersCollection);\n    return snapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    }));\n  } catch (err) {\n    console.error(\"Error getting Sneakers:\", err);\n  }\n};\nconst fetchCartSneakers = async () => {\n  try {\n    const cartCollection = collection(db, \"cart\");\n    const snapshot = await getDocs(cartCollection);\n    return snapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    }));\n  } catch (err) {\n    console.error(\"Error getting Sneakers:\", err);\n  }\n};\nconst addSneakerToCart = async sneaker => {\n  try {\n    const cartCollection = collection(db, \"cart\");\n    const docRef = await addDoc(cartCollection, {\n      id: sneaker.id,\n      title: sneaker.title,\n      price: sneaker.price,\n      imgUrl: sneaker.imgUrl\n    });\n    console.log(\"Sneaker added to cart\", docRef);\n    // console.log(\"docRef._key\", docRef._key.path.lastSegment());\n    return {\n      ...sneaker,\n      firestoreKey: docRef._key.path.lastSegment()\n    };\n  } catch (err) {\n    console.error(\"Error adding Sneaker to cart:\", err);\n  }\n};\nconst removeItemFromCart = async sneakerItemIn => {\n  console.log(sneakerItemIn);\n  try {\n    // console.log(\"Type of ID:\");\n    // const itemId = typeof  id === \"object\" ? id.id : id;\n    // console.log(\"Type of itemId:\", typeof itemId);\n    // if (typeof id !== \"string\") {\n    //     throw new Error(\"itemId should be a string\");\n    // }\n    const sneakerItem = doc(db, \"cart\", sneakerItemIn.firestoreKey);\n    await deleteDoc(sneakerItem);\n    console.log(\"removing succesully:\", sneakerItem);\n  } catch (err) {\n    console.error(\"Error removing Sneaker from favorites:\", err);\n  }\n};\nconst getFavoritesSneakers = async sneakers => {\n  try {\n    const sneakersCollection = collection(db, \"favorites\");\n    const snapshot = await getDocs(sneakersCollection);\n    return snapshot.docs.map(doc => ({\n      firestoreKey: doc._key.path.lastSegment(),\n      ...doc.data()\n    }));\n  } catch (err) {\n    console.error(\"Error loading favorite sneakers\", err);\n  }\n};\nconst addSneakerToFavorite = async sneaker => {\n  try {\n    const favoritesCollection = collection(db, \"favorites\");\n    const docRef = await addDoc(favoritesCollection, {\n      id: sneaker.id,\n      title: sneaker.title,\n      price: sneaker.price,\n      imgUrl: sneaker.imgUrl\n    });\n    console.log(\"Sneaker added to favorite\", docRef);\n    return {\n      ...sneaker,\n      firestoreKey: docRef._key.path.lastSegment()\n    };\n  } catch (err) {\n    console.error(\"Error adding Sneaker to favorite:\", err);\n  }\n};\nconst removeFromFavorites = async sneaker => {\n  try {\n    const sneakerItem = doc(db, \"favorites\", sneaker.firestoreKey);\n    await deleteDoc(sneakerItem);\n    console.log(\"removing succesully:\", sneakerItem);\n  } catch (err) {\n    console.error(\"Error removing Sneaker from favorites:\", err);\n  }\n};\nexport { fetchSneakers, addSneakerToCart, fetchCartSneakers, removeItemFromCart, addSneakerToFavorite, getFavoritesSneakers, removeFromFavorites };","map":{"version":3,"names":["collection","getDocs","addDoc","getFirestore","deleteDoc","doc","db","favorites","fetchSneakers","sneakersCollection","snapshot","docs","map","id","data","err","console","error","fetchCartSneakers","cartCollection","addSneakerToCart","sneaker","docRef","title","price","imgUrl","log","firestoreKey","_key","path","lastSegment","removeItemFromCart","sneakerItemIn","sneakerItem","getFavoritesSneakers","sneakers","addSneakerToFavorite","favoritesCollection","removeFromFavorites"],"sources":["/Users/natalia_sereda/Documents/FE_2024/react_practice/sneakers_store/src/firebase/firebaseService.js"],"sourcesContent":["import {collection, getDocs, addDoc, getFirestore, deleteDoc, doc} from \"firebase/firestore\";\nimport {db} from \"./firebase\";\nimport favorites from \"../pages/Favorites\";\n\nconst fetchSneakers = async () => {\n    try {\n        const sneakersCollection = collection(db, \"items\");\n        const snapshot = await getDocs(sneakersCollection);\n        return snapshot.docs.map(doc => ({id: doc.id, ...doc.data()}));\n    } catch (err) {\n        console.error(\"Error getting Sneakers:\", err);\n    }\n}\n\nconst fetchCartSneakers = async () => {\n    try {\n        const cartCollection = collection(db, \"cart\");\n        const snapshot = await getDocs(cartCollection);\n        return snapshot.docs.map(doc => ({id: doc.id, ...doc.data()}));\n    } catch (err) {\n        console.error(\"Error getting Sneakers:\", err);\n    }\n}\n\nconst addSneakerToCart = async (sneaker) => {\n    try {\n        const cartCollection = collection(db, \"cart\");\n        const docRef = await addDoc(cartCollection, {\n            id: sneaker.id,\n            title: sneaker.title,\n            price: sneaker.price,\n            imgUrl: sneaker.imgUrl,\n        });\n        console.log(\"Sneaker added to cart\", docRef);\n        // console.log(\"docRef._key\", docRef._key.path.lastSegment());\n        return {...sneaker, firestoreKey: docRef._key.path.lastSegment()}\n    } catch (err) {\n        console.error(\"Error adding Sneaker to cart:\", err);\n    }\n};\n\nconst removeItemFromCart = async (sneakerItemIn) => {\n    console.log(sneakerItemIn);\n    try {\n        // console.log(\"Type of ID:\");\n        // const itemId = typeof  id === \"object\" ? id.id : id;\n        // console.log(\"Type of itemId:\", typeof itemId);\n        // if (typeof id !== \"string\") {\n        //     throw new Error(\"itemId should be a string\");\n        // }\n        const sneakerItem = doc(db, \"cart\", sneakerItemIn.firestoreKey);\n        await deleteDoc(sneakerItem);\n        console.log(\"removing succesully:\", sneakerItem);\n    } catch (err) {\n        console.error(\"Error removing Sneaker from favorites:\", err);\n    }\n}\nconst getFavoritesSneakers = async (sneakers) => {\n    try {\n        const sneakersCollection = collection(db, \"favorites\");\n        const snapshot = await getDocs(sneakersCollection);\n        return snapshot.docs.map(doc =>\n            ({firestoreKey: doc._key.path.lastSegment(), ...doc.data()})\n        );\n    } catch (err) {\n        console.error(\"Error loading favorite sneakers\", err);\n    }\n}\nconst addSneakerToFavorite = async (sneaker) => {\n    try {\n        const favoritesCollection = collection(db, \"favorites\");\n        const docRef = await addDoc(favoritesCollection, {\n            id: sneaker.id,\n            title: sneaker.title,\n            price: sneaker.price,\n            imgUrl: sneaker.imgUrl,\n        });\n        console.log(\"Sneaker added to favorite\", docRef);\n        return {...sneaker, firestoreKey: docRef._key.path.lastSegment()};\n    } catch (err) {\n        console.error(\"Error adding Sneaker to favorite:\", err);\n    }\n};\nconst removeFromFavorites = async (sneaker) => {\n    try {\n        const sneakerItem = doc(db, \"favorites\", sneaker.firestoreKey);\n        await deleteDoc(sneakerItem);\n        console.log(\"removing succesully:\", sneakerItem);\n    } catch (err) {\n        console.error(\"Error removing Sneaker from favorites:\", err);\n    }\n}\n\nexport {\n    fetchSneakers,\n    addSneakerToCart,\n    fetchCartSneakers,\n    removeItemFromCart,\n    addSneakerToFavorite,\n    getFavoritesSneakers,\n    removeFromFavorites,\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}